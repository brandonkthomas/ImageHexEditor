@{
    ViewData["Title"] = "Image Hex Editor";
}

<section class="ix-page">
    <header class="ix-header">
        <div class="ix-header-main">
            <div class="ix-title">
                <span class="ix-title-main">Image Hex Editor</span>
                <span class="ix-title-sub">Directly edit the bytes of a JPEG image.</span>
            </div>
        </div>
        <div class="ix-header-actions">
            <input id="ix-file-input" type="file" accept="image/jpeg,image/jpg" hidden />
        </div>
    </header>

    <div class="ix-upload" id="ix-upload">
        <div class="ix-dropzone" id="ix-dropzone">
            <div class="ix-drop-inner">
                <div class="ix-drop-text">
                    <span class="ix-drop-text--desktop">Drag &amp; drop or click to upload</span>
                    <span class="ix-drop-text--mobile" aria-hidden="true">Tap to Upload</span>
                </div>
            </div>
        </div>
        <div class="ix-status" id="ix-status" aria-live="polite"></div>
    </div>

    <div class="ix-layout" id="ix-main" hidden>
        <div class="glass-surface glass-surface--fallback ix-editor-card" role="region" aria-label="Hex editor">
            <div class="glass-surface__content ix-card-content">
                <div class="ix-toolbar" id="ix-toolbar" aria-label="Editing tools" hidden>
                    <div class="ix-toolbar-group">
                        <button id="ix-undo-btn" type="button" class="ix-toolbar-btn" disabled>
                            <img src="~/apps/imagehexeditor/assets/svg/arrow-uturn-left.svg" asp-append-version="true" alt="Undo" class="ix-toolbar-icon" />
                        </button>
                        <button id="ix-redo-btn" type="button" class="ix-toolbar-btn" disabled>
                            <img src="~/apps/imagehexeditor/assets/svg/arrow-uturn-right.svg" asp-append-version="true" alt="Redo" class="ix-toolbar-icon" />
                        </button>
                    </div>
                    <div class="ix-toolbar-group">
                        <button id="ix-find-btn" type="button" class="ix-toolbar-btn" disabled>
                            <img src="~/apps/imagehexeditor/assets/svg/magnify-outline.svg" asp-append-version="true" alt="" class="ix-toolbar-icon" />
                            Find / Replace
                        </button>
                        <button id="ix-insert-btn" type="button" class="ix-toolbar-btn" disabled>
                            <img src="~/apps/imagehexeditor/assets/svg/insert-outline.svg" asp-append-version="true" alt="" class="ix-toolbar-icon" />
                            Insert Text
                        </button>
                        <button id="ix-jump-btn" type="button" class="ix-toolbar-btn" disabled>
                            <img src="~/apps/imagehexeditor/assets/svg/jumpto-outline.svg" asp-append-version="true" alt="" class="ix-toolbar-icon" />
                            Jump to...
                        </button>
                    </div>
                    <div class="ix-status ix-status--secondary" id="ix-editor-status" aria-live="polite"></div>
                </div>

                <div class="ix-jump-menu" id="ix-jump-menu" hidden aria-label="Jump to JPEG region" role="dialog" aria-modal="false">
                    <div class="ix-jump-menu-header">
                        <span class="ix-jump-menu-title">Jump to...</span>
                        <button id="ix-jump-close-btn" type="button" class="ix-toolbar-btn ix-toolbar-btn--secondary ix-jump-close-btn">
                            Close
                        </button>
                    </div>
                    <div class="ix-jump-menu-body" id="ix-jump-menu-body"></div>
                </div>

                <div class="ix-editor">
                    <div class="ix-grid-wrapper">
                        <div class="ix-grid-header">
                            <div class="ix-offset-header">Offset</div>
                            <div class="ix-bytes-header">
                                @for (var i = 0; i < 16; i++)
                                {
                                    <span>@i.ToString("X2")</span>
                                }
                            </div>
                            <div class="ix-ascii-header">ASCII</div>
                        </div>
                        <div class="ix-grid-body" id="ix-grid" tabindex="0" aria-label="Hex editor"></div>
                    </div>
                </div>
            </div>
        </div>

        <aside class="glass-surface glass-surface--fallback ix-preview-card" role="region" aria-label="JPEG preview">
            <div class="glass-surface__content ix-card-content">
                <div class="ix-preview">
                    <div class="ix-preview-frame">
                        <img id="ix-preview-image" alt="JPEG preview" />
                        <div id="ix-preview-throbber" class="ix-preview-throbber" aria-hidden="true">
                            <img src="/assets/svg/throbber-ring-indef.svg" alt="" class="ix-preview-throbber-image" />
                        </div>
                    </div>
                    <dl class="ix-meta">
                        <div class="ix-meta-row">
                            <dt>File</dt>
                            <dd id="ix-meta-filename">—</dd>
                        </div>
                        <div class="ix-meta-row">
                            <dt>Size</dt>
                            <dd id="ix-meta-size">—</dd>
                        </div>
                        <div class="ix-meta-row">
                            <dt>Dimensions</dt>
                            <dd id="ix-meta-dimensions">—</dd>
                        </div>
                    </dl>
                    <div class="ix-preview-actions">
                        <button id="ix-download-btn" type="button" class="ix-toolbar-btn ix-toolbar-btn--secondary" disabled>
                            <img src="~/apps/imagehexeditor/assets/svg/download-outline.svg" asp-append-version="true" alt="" class="ix-toolbar-icon" />
                            Download
                        </button>
                        <button id="ix-upload-new-btn" type="button" class="ix-toolbar-btn ix-toolbar-btn--secondary" disabled>
                            <img src="~/apps/imagehexeditor/assets/svg/upload-outline.svg" asp-append-version="true" alt="" class="ix-toolbar-icon" />
                            Upload new image
                        </button>
                    </div>
                </div>
            </div>
        </aside>
    </div>
</section>

@section Styles {
    <link rel="stylesheet" href="~/apps/imagehexeditor/css/imagehexeditor.css" asp-append-version="true" />
}

@section Scripts {
    <script src="~/apps/imagehexeditor/dist/js/imagehexeditor.js" type="module" asp-append-version="true"></script>
}
